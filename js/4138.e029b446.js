"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[4138,1806],{37458:function(t,e,n){n.d(e,{Z:function(){return u}});var a=n(66252),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},r=n(33058);function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){o(t,e,n[e])}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(t,e){var n=i({},t,e.attrs);return(0,a.Wm)(r.Z,i({},n,{icon:l}),null)};c.displayName="FullscreenExitOutlined",c.inheritAttrs=!1;var u=c},95566:function(t,e,n){n.d(e,{Z:function(){return u}});var a=n(66252),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},r=n(33058);function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){o(t,e,n[e])}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(t,e){var n=i({},t,e.attrs);return(0,a.Wm)(r.Z,i({},n,{icon:l}),null)};c.displayName="FullscreenOutlined",c.inheritAttrs=!1;var u=c},76496:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{Af:function(){return o},RD:function(){return d},ZT:function(){return c},_8:function(){return u}});var l=n(4064),r=n(57314),i=t([l]);function o(){return(0,l.W)({url:r.default.list,method:"get"})}function c(t){return(0,l.W)({url:r.default.add,method:"post",data:t},{successMsg:"创建成功"})}function u(t){return(0,l.W)({url:r.default.update,method:"post",data:t},{successMsg:"更新成功"})}function d(t){return(0,l.W)({url:r.default.delete,method:"post",data:t},{successMsg:"删除成功"})}l=(i.then?(await i)():i)[0],a()}catch(s){a(s)}}))},12746:function(t,e,n){n.d(e,{BQ:function(){return r},bl:function(){return l},fl:function(){return a}});n(85827);const a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.filter((t=>t.parentId===e)).map((l=>{const r=n.concat(e||[]),i=a(t,l.id,r);return Object.assign(l,{keyPath:r,title:l.name,key:l.id,value:l.id,formData:l,children:i.length?i:null})}))},l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.filter((t=>t.parentId===e)).map((a=>{const r=n.concat(e||[]),i=l(t,a.id,r);return Object.assign(a,{keyPath:r,title:a.name,key:a.id,value:a.id,formData:a,children:i.length?i:null})}))},r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";return e.reduce(((e,l)=>{var i;return l[n]===t?l:e||(null!==(i=l[a])&&void 0!==i&&i.length?r(t,l[a],n,a):void 0)}),void 0)}},90487:function(t,e,n){n.a(t,(async function(t,a){try{var l=n(66252),r=n(2262),i=n(68652),o=n(41806),c=n(90828),u=n(76496),d=n(21502),s=n(46945),f=n(12746),v=t([c,u,d,s]);[c,u,d,s]=v.then?(await v)():v;const p=(0,l.aZ)({name:"SysMenu"});e.Z=(0,l.aZ)({...p,setup(t){const e=(0,r.iH)([]),[n,a]=(0,d.useTable)({search:!1,pagination:!1,size:"small",rowKey:"id",bordered:!0,scroll:{x:2e3}}),[v]=(0,s.U)(),p=async()=>{const t=await(0,u.Af)();return e.value=(0,f.bl)((0,i.Z)(t).filter((t=>2!==t.type)),null),{list:(0,f.bl)((0,i.Z)(t),null)}},m=async t=>{var n,l,i;const[o]=await v({modalProps:{title:(t.id?"编辑":"新增")+"菜单",width:700,onFinish:async e=>{var n;t.id&&(e.menuId=t.id),e.perms=null===(n=e.perms)||void 0===n?void 0:n.join(","),await(t.id?u._8:u.ZT)(e),a.reload()}},formProps:{labelWidth:100,schemas:c.menuSchemas}});null==o||o.updateSchema([{field:"parentId",componentProps:{treeDefaultExpandedKeys:[-1].concat((null==t?void 0:t.keyPath)||[]),treeData:(0,r.iH)([{id:-1,name:"一级菜单",children:e.value}])}}]),null==o||o.setFieldsValue({...t,icon:null!==(n=t.icon)&&void 0!==n?n:"",perms:null===(l=t.perms)||void 0===l?void 0:l.split(","),parentId:null!==(i=t.parentId)&&void 0!==i?i:-1})},h=[...o.baseColumns,{title:"操作",width:160,dataIndex:"ACTION",hideInSearch:!0,align:"center",fixed:"right",actions:t=>{let{record:e}=t;return[{label:"编辑",auth:{perm:"sys.menu.update",effect:"disable"},onClick:()=>m(e)},{label:"删除",auth:"sys.menu.delete",popConfirm:{title:"你确定要删除吗？",onConfirm:()=>(async t=>{await(0,u.RD)({menuId:t.id}),a.reload()})(e)}}]}}];return(t,e)=>{const a=(0,l.up)("a-button");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)((0,r.SU)(n),{"header-title":"菜单管理","data-request":p,columns:h},{toolbar:(0,l.w5)((()=>[(0,l.Wm)(a,{type:"primary",disabled:!t.$auth("sys.menu.add"),onClick:e[0]||(e[0]=t=>m({}))},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增 ")])),_:1},8,["disabled"])])),_:1})])}}}),a()}catch(t){a(t)}}))},8348:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{X:function(){return v}});n(18702);var l=n(35502),r=n(66252),i=n(2262),o=n(50116),c=n(71377),u=n(77991),d=n(45989),s=t([d]);function f(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!(0,r.lA)(t)}d=(s.then?(await s)():s)[0];const v=(0,r.aZ)({components:{customModal:u.DraggableModal},props:{content:{type:[String,Function]},closeModal:Function,visible:Boolean,isAppChild:Boolean},setup(t,e){let{attrs:n,expose:a}=e;const u=(0,i.iH)(!1),{getAntdLocale:s}=(0,d.b)(),v=(0,i.iH)({...n,...t}),p=(0,r.Fl)((()=>({...n,...t,...(0,i.SU)(v)}))),m=(0,r.Fl)((()=>{const t=(0,i.SU)(p);return{...(0,o.Z)(t,["onCancel","onOk","closeModal","isAppChild","content"]),visible:t.visible,confirmLoading:u.value,onCancel:b,onOk:y}})),h=t=>{v.value.visible=t};(0,r.YP)((()=>v.value.visible),(e=>{var n;Object.is(e,!1)&&(null===(n=t.closeModal)||void 0===n||n.call(t))}));const y=async t=>{u.value=!0;try{var e,n;await(null===(e=(0,i.SU)(p))||void 0===e||null===(n=e.onOk)||void 0===n?void 0:n.call(e,t)),h(!1)}catch(t){return Promise.reject(t)}finally{u.value=!1}},b=async t=>{var e,n;await(null===(e=(0,i.SU)(p))||void 0===e||null===(n=e.onCancel)||void 0===n?void 0:n.call(e,t)),h(!1)};return a({setProps:t=>{v.value={...(0,i.SU)(p),...t}}}),()=>{const t=(0,i.SU)(p),{content:e,isAppChild:n}=t,a=(0,c.mf)(e)?e():e;return n?(0,r.Wm)((0,r.up)("customModal"),(0,i.SU)(m),f(a)?a:{default:()=>[a]}):(0,r.Wm)(l.ZP,{locale:s.value},{default:()=>[(0,r.Wm)((0,r.up)("customModal"),(0,i.SU)(m),f(a)?a:{default:()=>[a]})]})}}});a()}catch(p){a(p)}}))},46945:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{U:function(){return d}});var l=n(66252),r=n(2262),i=n(50116),o=n(92507),c=n(91980),u=t([o,c]);function d(){const[t]=(0,o.d)();return[async e=>{let{modalProps:n,formProps:a}=e;const o=(0,r.iH)();return await t.show({destroyOnClose:!0,...(0,i.Z)(n,["onFinish","onFail"]),onCancel:t=>{var e,a;null===(e=o.value)||void 0===e||e.resetFields(),null==n||null===(a=n.onCancel)||void 0===a||a.call(n,t)},content:()=>{const t=Object.assign({},{showActionButtonGroup:!1},a);return(0,l.Wm)(c.default,(0,l.dG)({ref:o},t),null)},onOk:async()=>{let t;try{var e,a,l;t=await(null===(e=o.value)||void 0===e?void 0:e.validate()),await(null==n||null===(a=n.onFinish)||void 0===a?void 0:a.call(n,t)),null===(l=o.value)||void 0===l||l.resetFields()}catch(e){var r;return null==n||null===(r=n.onFail)||void 0===r||r.call(n,t),Promise.reject(e)}}}),await(0,l.Y3)(),[(0,r.SU)(o)]},t]}[o,c]=u.then?(await u)():u,a()}catch(s){a(s)}}))},92507:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{d:function(){return d}});var l=n(66252),r=n(2262),i=n(49963),o=n(8348),c=t([o]);let u;o=(c.then?(await c)():c)[0];const d=()=>{var t,e;let n;const a=(0,r.iH)(),c=(null===(t=u)||void 0===t?void 0:t._context)||(null===(e=(0,l.FN)())||void 0===e?void 0:e.appContext),d=(0,r.iH)(!1),s=async t=>{const e=await(async()=>{if(await(0,l.Y3)(),d.value&&a.value)return a.value;if(n)return n;const t=document.createElement("div"),e=(0,l.Wm)(o.X);return e.appContext=c,(0,i.sY)(e,t),n=e.component,n.props.closeModal=f,n})();var r,u,s;Object.is(e,a.value)?null==e||null===(r=e.setProps)||void 0===r||r.call(e,t):null==e||null===(u=e.exposed)||void 0===u||null===(s=u.setProps)||void 0===s||s.call(u,t)},f=()=>{s({visible:!1})},v=(t,e)=>{let{attrs:n,slots:r}=e;return d.value=!0,(0,l.Wm)(o.X,(0,l.dG)({ref:a},{...n,...t}),r)};return v.show=async t=>{s({...t,closeModal:f,visible:!0}),await(0,l.Y3)()},v.hide=f,v.setProps=s,[v,a]};a()}catch(t){a(t)}}))},41806:function(t,e,n){n.r(e),n.d(e,{baseColumns:function(){return r}});n(93300);var a=n(96461),l=n(66252);const r=[{title:"名称",dataIndex:"name",width:240,fixed:"left"},{title:"图标",width:80,dataIndex:"icon",align:"center",customRender:t=>{let{record:e}=t;return e.icon&&(0,l.Wm)((0,l.up)("icon-font"),{type:e.icon,size:"22"},null)}},{title:"类型",width:80,align:"center",dataIndex:"type",customRender:t=>{let{record:e}=t;return(t=>{switch(t){case 0:return"目录";case 1:return"菜单";case 2:return"权限";default:return""}})(e.type)}},{title:"节点路由",dataIndex:"router",align:"center",width:240},{title:"路由缓存",dataIndex:"keepalive",align:"center",width:80,customRender:t=>{let{record:e}=t;return 1===e.type&&(e.keepalive?"是":"否")}},{title:"文件路径",width:280,align:"center",dataIndex:"viewPath"},{title:"权限",width:300,align:"center",dataIndex:"perms",customRender:t=>{var e;let{record:n}=t;return 2==n.type&&(0,l.Wm)("div",null,[null===(e=n.perms)||void 0===e?void 0:e.split(",").map((t=>{return(0,l.Wm)(a.ZP,{color:"blue",key:t},"function"==typeof(e=t)||"[object Object]"===Object.prototype.toString.call(e)&&!(0,l.lA)(e)?t:{default:()=>[t]});var e}))])}},{title:"排序号",width:80,align:"center",dataIndex:"orderNum"},{title:"更新时间",width:180,align:"center",dataIndex:"updatedAt"}]},15168:function(t,e,n){n.a(t,(async function(t,a){try{n.r(e);var l=n(74786),r=t([l]);const i=(l=(r.then?(await r)():r)[0]).Z;e.default=i,a()}catch(t){a(t)}}))},74786:function(t,e,n){n.a(t,(async function(t,a){try{n.d(e,{Z:function(){return l.Z}});var l=n(90487),r=t([l]);l=(r.then?(await r)():r)[0],a()}catch(t){a(t)}}))},111:function(t,e,n){var a=n(36409),l=n(77226);e.Z=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return(0,l.Z)(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),(0,a.Z)(t,e,{leading:r,maxWait:e,trailing:i})}}}]);