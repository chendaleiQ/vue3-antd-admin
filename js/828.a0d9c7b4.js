"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[828,6580],{75956:function(e,n,l){l.a(e,(async function(e,t){try{l(93300);var a=l(96461),r=(l(38049),l(62282)),o=(l(89397),l(98704)),u=(l(50460),l(17301)),i=(l(85827),l(66252)),c=l(2262),d=l(49963),s=l(3577),v=l(66309),p=l(60191),h=l(77630),f=l(46580),m=l(66827),k=e([m]);m=(k.then?(await k)():k)[0];const y={class:"input-box"};n.Z=(0,i.aZ)({__name:"index",props:{value:{type:Array,default:()=>[],isRequired:!0}},emits:["update:value"],setup(e,n){let{emit:l}=n;const t=e,k=(0,v.NCN)(t,"value",l),g=(0,c.iH)(),b=(0,c.iH)((0,m.ik)()),w=u.ZP.useInjectFormItemContext(),C=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(((e,n)=>{var l,t;return null!==(l=n.children)&&void 0!==l&&l.length||!n.checked||!n.value||e.push({label:n.value,value:n.value,node:n}),null!==(t=n.children)&&void 0!==t&&t.length&&C(n.children,e),e}),n)},_=e=>{const n=e=>e.some((e=>{var l;return!!k.value.includes(e.value)||!(null===(l=e.children)||void 0===l||!l.length)&&n(e.children)})),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e||e.forEach((e=>{var a,r;null!==(a=e.children)&&void 0!==a&&a.length&&l(e.children,e),e.parent=t,e.indeterminate=!1,e.checked=k.value.includes(e.value),null!==(r=e.children)&&void 0!==r&&r.length&&(e.indeterminate=n(e.children))}))};l(e)};_(b.value);const S=()=>{k.value=[],setTimeout((()=>{var e;b.value=(0,m.ik)(),_(b.value),null===(e=g.value)||void 0===e||e.clearCheck()}))},P=(0,i.Fl)((()=>C(b.value)));return(0,i.YP)((()=>P.value),(e=>{k.value=e.map((e=>e.value)),w.onFieldChange()})),(e,n)=>((0,i.wg)(),(0,i.j4)((0,c.SU)(o.Z),{placement:"bottomLeft",trigger:"click","overlay-class-name":"__multiple-cascader"},{content:(0,i.w5)((()=>[(0,i.Wm)(h.default,{ref_key:"nodePanelRef",ref:g,options:b.value},null,8,["options"])])),default:(0,i.w5)((()=>[(0,i._)("div",y,[(0,i.Wm)((0,c.SU)(r.ZP),{placeholder:"请选择"},(0,i.Nv)({_:2},[(0,c.SU)(P).length?{name:"prefix",fn:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,c.SU)(P),(e=>((0,i.wg)(),(0,i.j4)((0,c.SU)(a.ZP),{key:e.value,class:"tag-item",closable:"",onClose:(0,d.iM)((n=>(e=>{(0,f.updateNodeCheckStatus)(!1,e.node)})(e)),["prevent"])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.label),1)])),_:2},1032,["onClose"])))),128)),(0,i.Wm)((0,c.SU)(p.Z),{class:"clear-icon",onClick:(0,d.iM)(S,["prevent"])},null,8,["onClick"])])),key:"0"}:void 0]),1024)])])),_:1}))}}),t()}catch(e){t(e)}}))},46580:function(e,n,l){l.r(n),l.d(n,{setChildrenChecked:function(){return a},setParentChecked:function(){return t},updateNodeCheckStatus:function(){return r}});const t=e=>{const n=null==e?void 0:e.children,l=null==n?void 0:n.length,a=!!l&&!n.some((e=>!e.checked)),r=!!l&&n.some((e=>e.checked||e.indeterminate));e.checked=a,e.indeterminate=!a&&r,e.parent&&t(e.parent)},a=(e,n)=>{null==e||e.forEach((e=>{var l;e.checked=n,e.indeterminate=!1,null!==(l=e.children)&&void 0!==l&&l.length&&a(e.children,n)}))},r=(e,n)=>{var l;n.checked=e,n.indeterminate=!1,Array.isArray(n.children)&&null!==(l=n.children)&&void 0!==l&&l.length&&a(n.children,e),n.parent&&t(n.parent)}},90828:function(e,n,l){l.a(e,(async function(e,t){try{l.r(n),l.d(n,{menuSchemas:function(){return i}});var a=l(30923),r=l(71144),o=l(5143),u=e([a]);a=(u.then?(await u)():u)[0];const i=[{field:"type",component:"RadioGroup",label:"菜单类型",defaultValue:0,rules:[{required:!0,type:"number"}],componentProps:{options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}]}},{field:"name",component:"Input",label:"节点名称",rules:[{required:!0,type:"string"}]},{field:"parentId",component:"TreeSelect",label:"上级节点",componentProps:{fieldNames:{label:"name",value:"id"},getPopupContainer:()=>document.body},rules:[{required:!0,type:"number"}]},{field:"router",component:"Input",label:"节点路由",vIf:e=>{let{formModel:n}=e;return 2!==n.type},rules:[{required:!0,type:"string"}]},{field:"perms",component:()=>a.default,label:"权限",vIf:e=>{let{formModel:n}=e;return 2===n.type},rules:[{required:!0,type:"array",message:"请选择权限"}]},{field:"viewPath",component:"Select",label:"文件路径",vIf:e=>{let{formModel:n}=e;return 1===n.type},componentProps:{options:Object.keys(o.constantRouterComponents).map((e=>({label:e,value:e})))},rules:[{required:!0,type:"string"}]},{field:"icon",component:()=>r.default,label:"节点图标",vIf:e=>{let{formModel:n}=e;return 2!==n.type}},{field:"keepalive",component:"Switch",label:"是否缓存",defaultValue:!0,vIf:e=>{let{formModel:n}=e;return 1===n.type}},{field:"isShow",component:"Switch",label:"是否显示",defaultValue:!0,vIf:e=>{let{formModel:n}=e;return 2!==n.type}},{field:"orderNum",component:"InputNumber",label:"排序号",defaultValue:255,componentProps:{style:{width:"100%"}}}];t()}catch(e){t(e)}}))},30923:function(e,n,l){l.a(e,(async function(e,t){try{l.r(n);var a=l(46439),r=(l(219),l(57415),l(83744)),o=e([a]);a=(o.then?(await o)():o)[0];const u=(0,r.Z)(a.Z,[["__scopeId","data-v-a03d269e"]]);n.default=u,t()}catch(e){t(e)}}))},77630:function(e,n,l){l.r(n),l.d(n,{default:function(){return f}});l(79861);var t=l(36993),a=l(66252),r=l(2262),o=l(3577),u=l(67944),i=l(46580);const c={class:"flex"},d={class:"ant-cascader-menu min-w-150px"},s=["onClick"],v={class:"label"},p=(0,a.aZ)({name:"NodePanel"});var h=(0,a.aZ)({...p,props:{options:{type:Array,default:()=>[]}},setup(e,n){let{expose:l}=n;const p=e,h=(0,r.iH)(),f=(0,r.iH)([]),m=(0,r.iH)(),k=()=>{var e,n;return null===(e=p.options)||void 0===e||null===(n=e.find((e=>e.value===m.value)))||void 0===n?void 0:n.children},y=(0,a.Fl)(k);(0,a.YP)(y,(e=>{e||(f.value=[])}));return l({clearCheck:()=>{var e;f.value.forEach((e=>{e.checked=!1,e.indeterminate=!1})),f.value.length&&setTimeout((()=>{f.value=k()||[]})),null===(e=h.value)||void 0===e||e.clearCheck()}}),(n,l)=>{var p;const k=(0,a.up)("node-panel",!0);return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(e=>{var n;return(0,a.wg)(),(0,a.iD)("div",{key:e.value,class:"check-row ant-cascader-menu-item ant-cascader-menu-item-expand",onClick:n=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;f.value=e,m.value=n}(e.children,e.value)},[(0,a._)("div",null,[(0,a.Wm)((0,r.SU)(t.ZP),{checked:e.checked,"onUpdate:checked":n=>e.checked=n,indeterminate:e.indeterminate,onChange:n=>((e,n)=>{const l=e.target.checked;(0,i.updateNodeCheckStatus)(l,n)})(n,e)},null,8,["checked","onUpdate:checked","indeterminate","onChange"]),(0,a._)("span",v,(0,o.zw)(e.label),1)]),null!==(n=e.children)&&void 0!==n&&n.length?((0,a.wg)(),(0,a.j4)((0,r.SU)(u.Z),{key:0,class:"arrow"})):(0,a.kq)("",!0)],8,s)})),128))]),null!==(p=f.value)&&void 0!==p&&p.length&&(0,r.SU)(y)?((0,a.wg)(),(0,a.j4)(k,{key:0,ref_key:"nodePanelRef",ref:h,options:f.value},null,8,["options"])):(0,a.kq)("",!0)])}}});var f=(0,l(83744).Z)(h,[["__scopeId","data-v-15a34f47"]])},46439:function(e,n,l){l.a(e,(async function(e,t){try{l.d(n,{Z:function(){return a.Z}});var a=l(75956),r=e([a]);a=(r.then?(await r)():r)[0],t()}catch(e){t(e)}}))},219:function(){},57415:function(){}}]);