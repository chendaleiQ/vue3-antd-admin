"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[3027,4118,4809],{37458:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(66252),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},r=n(33058);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t){var n=o({},e,t.attrs);return(0,a.Wm)(r.Z,o({},n,{icon:l}),null)};c.displayName="FullscreenExitOutlined",c.inheritAttrs=!1;var u=c},95566:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(66252),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},r=n(33058);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t){var n=o({},e,t.attrs);return(0,a.Wm)(r.Z,o({},n,{icon:l}),null)};c.displayName="FullscreenOutlined",c.inheritAttrs=!1;var u=c},68868:function(e,t,n){n.a(e,(async function(e,a){try{n(85827);var l=n(66252),r=n(2262),o=n(34118),i=n(14809),c=n(27623),u=n(31136),d=n(76496),s=n(21502),f=n(46945),p=n(12746),h=e([c,u,d,s,f]);[c,u,d,s,f]=h.then?(await h)():h;const m=(0,l.aZ)({name:"SystemPermissionRole"});t.Z=(0,l.aZ)({...m,setup(e){const[t,n]=(0,s.useTable)(),[a]=(0,f.U)(),h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.reduce(((t,a)=>{var l;return null!==(l=a.children)&&void 0!==l&&l.length?h(e,a.children,n):e.includes(a.value)&&t.push(a.value),t}),n)},m=async e=>{const[t]=await a({modalProps:{title:(e.id?"编辑":"新增")+"角色",width:"50%",onFinish:async a=>{e.id&&(a.roleId=e.id);const l=null==t?void 0:t.compRefMap.get("menus"),r=null==t?void 0:t.compRefMap.get("depts"),o={...a,menus:[...l.halfCheckedKeys,...l.checkedKeys],depts:[...r.halfCheckedKeys,...r.checkedKeys]};await(e.id?c.ul:c.fA)(o),null==n||n.reload()}},formProps:{labelWidth:100,schemas:i.roleSchemas}}),[l,r]=await Promise.all([(0,u.U4)(),(0,d.Af)()]),o=(0,p.bl)(r),s=(0,p.fl)(l);if(null==t||t.updateSchema([{field:"menus",componentProps:{treeData:o}},{field:"depts",componentProps:{treeData:s}}]),e.id){const n=await(0,c.Xt)({roleId:e.id}),a=n.menus.map((e=>e.menuId)),l=n.depts.map((e=>e.departmentId));null==t||t.setFieldsValue({...e,name:n.roleInfo.name,label:n.roleInfo.label,remark:n.roleInfo.remark,menus:h(a,o),depts:h(l,s)})}},v=[...o.baseColumns,{title:"操作",width:160,dataIndex:"ACTION",hideInSearch:!0,align:"center",fixed:"right",actions:e=>{let{record:t}=e;return[{label:"编辑",auth:{perm:"sys.role.update",effect:"disable"},onClick:()=>m(t)},{label:"删除",auth:"sys.role.delete",popConfirm:{title:"你确定要删除吗？",onConfirm:()=>(async e=>{await(0,c.Rd)({roleIds:[e.id]}),null==n||n.reload()})(t)}}]}}];return(e,n)=>{const a=(0,l.up)("a-button");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)((0,r.SU)(t),{"row-key":"id","header-title":"角色管理","data-request":(0,r.SU)(c.$s),columns:v,bordered:"",size:"small"},{toolbar:(0,l.w5)((()=>[(0,l.Wm)(a,{type:"primary",disabled:!e.$auth("sys.role.add"),onClick:n[0]||(n[0]=e=>m({}))},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增 ")])),_:1},8,["disabled"])])),_:1},8,["data-request"])])}}}),a()}catch(e){a(e)}}))},31136:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{MB:function(){return u},U4:function(){return i},UJ:function(){return d},aS:function(){return c},m3:function(){return s}});var l=n(4064),r=n(27301),o=e([l]);function i(){return(0,l.W)({url:r.default.list,method:"get"})}function c(e){return(0,l.W)({url:"sys/dept/delete",method:"post",data:e},{successMsg:"删除成功"})}function u(e){return(0,l.W)({url:r.default.update,method:"post",data:e})}function d(e){return(0,l.W)({url:r.default.add,method:"post",data:e})}function s(e){return(0,l.W)({url:r.default.transfer,method:"post",data:e})}l=(o.then?(await o)():o)[0],a()}catch(f){a(f)}}))},76496:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Af:function(){return i},RD:function(){return d},ZT:function(){return c},_8:function(){return u}});var l=n(4064),r=n(57314),o=e([l]);function i(){return(0,l.W)({url:r.default.list,method:"get"})}function c(e){return(0,l.W)({url:r.default.add,method:"post",data:e},{successMsg:"创建成功"})}function u(e){return(0,l.W)({url:r.default.update,method:"post",data:e},{successMsg:"更新成功"})}function d(e){return(0,l.W)({url:r.default.delete,method:"post",data:e},{successMsg:"删除成功"})}l=(o.then?(await o)():o)[0],a()}catch(s){a(s)}}))},27623:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{$s:function(){return u},JV:function(){return c},Rd:function(){return f},Xt:function(){return i},fA:function(){return d},ul:function(){return s}});var l=n(4064),r=n(15322),o=e([l]);function i(e){return(0,l.W)({url:r.default.info,method:"get",params:e})}function c(e){return(0,l.W)({url:r.default.list,method:"get",data:e})}function u(e){return(0,l.W)({url:r.default.page,method:"get",params:e})}function d(e){return(0,l.W)({url:r.default.add,method:"post",data:e},{successMsg:"创建角色成功"})}function s(e){return(0,l.W)({url:r.default.update,method:"post",data:e},{successMsg:"更新角色成功"})}function f(e){return(0,l.W)({url:r.default.delete,method:"post",data:e},{successMsg:"删除角色成功"})}l=(o.then?(await o)():o)[0],a()}catch(p){a(p)}}))},12746:function(e,t,n){n.d(t,{BQ:function(){return r},bl:function(){return l},fl:function(){return a}});n(85827);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.filter((e=>e.parentId===t)).map((l=>{const r=n.concat(t||[]),o=a(e,l.id,r);return Object.assign(l,{keyPath:r,title:l.name,key:l.id,value:l.id,formData:l,children:o.length?o:null})}))},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.filter((e=>e.parentId===t)).map((a=>{const r=n.concat(t||[]),o=l(e,a.id,r);return Object.assign(a,{keyPath:r,title:a.name,key:a.id,value:a.id,formData:a,children:o.length?o:null})}))},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";return t.reduce(((t,l)=>{var o;return l[n]===e?l:t||(null!==(o=l[a])&&void 0!==o&&o.length?r(e,l[a],n,a):void 0)}),void 0)}},14809:function(e,t,n){n.r(t),n.d(t,{roleSchemas:function(){return a}});const a=[{field:"name",component:"Input",label:"名称",rules:[{required:!0,type:"string"}],colProps:{span:12}},{field:"label",component:"Input",label:"标识",rules:[{required:!0,type:"string"}],colProps:{span:12}},{field:"remark",component:"InputTextArea",label:"备注"},{field:"menus",component:"Tree",label:"菜单权限",colProps:{span:12},componentProps:{checkable:!0,vModelKey:"checkedKeys",style:{height:"350px",paddingTop:"5px",overflow:"auto",borderRadius:"6px",border:"1px solid #dcdfe6"}}},{field:"depts",component:"Tree",label:"部门权限",colProps:{span:12},componentProps:{checkable:!0,vModelKey:"checkedKeys",style:{height:"350px",paddingTop:"5px",overflow:"auto",borderRadius:"6px",border:"1px solid #dcdfe6"}}}]},8348:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{X:function(){return p}});n(18702);var l=n(35502),r=n(66252),o=n(2262),i=n(50116),c=n(71377),u=n(77991),d=n(45989),s=e([d]);function f(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.lA)(e)}d=(s.then?(await s)():s)[0];const p=(0,r.aZ)({components:{customModal:u.DraggableModal},props:{content:{type:[String,Function]},closeModal:Function,visible:Boolean,isAppChild:Boolean},setup(e,t){let{attrs:n,expose:a}=t;const u=(0,o.iH)(!1),{getAntdLocale:s}=(0,d.b)(),p=(0,o.iH)({...n,...e}),h=(0,r.Fl)((()=>({...n,...e,...(0,o.SU)(p)}))),m=(0,r.Fl)((()=>{const e=(0,o.SU)(h);return{...(0,i.Z)(e,["onCancel","onOk","closeModal","isAppChild","content"]),visible:e.visible,confirmLoading:u.value,onCancel:b,onOk:y}})),v=e=>{p.value.visible=e};(0,r.YP)((()=>p.value.visible),(t=>{var n;Object.is(t,!1)&&(null===(n=e.closeModal)||void 0===n||n.call(e))}));const y=async e=>{u.value=!0;try{var t,n;await(null===(t=(0,o.SU)(h))||void 0===t||null===(n=t.onOk)||void 0===n?void 0:n.call(t,e)),v(!1)}catch(e){return Promise.reject(e)}finally{u.value=!1}},b=async e=>{var t,n;await(null===(t=(0,o.SU)(h))||void 0===t||null===(n=t.onCancel)||void 0===n?void 0:n.call(t,e)),v(!1)};return a({setProps:e=>{p.value={...(0,o.SU)(h),...e}}}),()=>{const e=(0,o.SU)(h),{content:t,isAppChild:n}=e,a=(0,c.mf)(t)?t():t;return n?(0,r.Wm)((0,r.up)("customModal"),(0,o.SU)(m),f(a)?a:{default:()=>[a]}):(0,r.Wm)(l.ZP,{locale:s.value},{default:()=>[(0,r.Wm)((0,r.up)("customModal"),(0,o.SU)(m),f(a)?a:{default:()=>[a]})]})}}});a()}catch(h){a(h)}}))},46945:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{U:function(){return d}});var l=n(66252),r=n(2262),o=n(50116),i=n(92507),c=n(91980),u=e([i,c]);function d(){const[e]=(0,i.d)();return[async t=>{let{modalProps:n,formProps:a}=t;const i=(0,r.iH)();return await e.show({destroyOnClose:!0,...(0,o.Z)(n,["onFinish","onFail"]),onCancel:e=>{var t,a;null===(t=i.value)||void 0===t||t.resetFields(),null==n||null===(a=n.onCancel)||void 0===a||a.call(n,e)},content:()=>{const e=Object.assign({},{showActionButtonGroup:!1},a);return(0,l.Wm)(c.default,(0,l.dG)({ref:i},e),null)},onOk:async()=>{let e;try{var t,a,l;e=await(null===(t=i.value)||void 0===t?void 0:t.validate()),await(null==n||null===(a=n.onFinish)||void 0===a?void 0:a.call(n,e)),null===(l=i.value)||void 0===l||l.resetFields()}catch(t){var r;return null==n||null===(r=n.onFail)||void 0===r||r.call(n,e),Promise.reject(t)}}}),await(0,l.Y3)(),[(0,r.SU)(i)]},e]}[i,c]=u.then?(await u)():u,a()}catch(s){a(s)}}))},92507:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{d:function(){return d}});var l=n(66252),r=n(2262),o=n(49963),i=n(8348),c=e([i]);let u;i=(c.then?(await c)():c)[0];const d=()=>{var e,t;let n;const a=(0,r.iH)(),c=(null===(e=u)||void 0===e?void 0:e._context)||(null===(t=(0,l.FN)())||void 0===t?void 0:t.appContext),d=(0,r.iH)(!1),s=async e=>{const t=await(async()=>{if(await(0,l.Y3)(),d.value&&a.value)return a.value;if(n)return n;const e=document.createElement("div"),t=(0,l.Wm)(i.X);return t.appContext=c,(0,o.sY)(t,e),n=t.component,n.props.closeModal=f,n})();var r,u,s;Object.is(t,a.value)?null==t||null===(r=t.setProps)||void 0===r||r.call(t,e):null==t||null===(u=t.exposed)||void 0===u||null===(s=u.setProps)||void 0===s||s.call(u,e)},f=()=>{s({visible:!1})},p=(e,t)=>{let{attrs:n,slots:r}=t;return d.value=!0,(0,l.Wm)(i.X,(0,l.dG)({ref:a},{...n,...e}),r)};return p.show=async e=>{s({...e,closeModal:f,visible:!0}),await(0,l.Y3)()},p.hide=f,p.setProps=s,[p,a]};a()}catch(e){a(e)}}))},34118:function(e,t,n){n.r(t),n.d(t,{baseColumns:function(){return a}});const a=[{title:"#",dataIndex:"id",width:55,align:"center",hideInSearch:!0},{title:"名称",width:200,align:"center",dataIndex:"name"},{title:"标识",width:80,align:"center",dataIndex:"label"},{title:"备注",dataIndex:"remark",align:"center"},{title:"创建时间",dataIndex:"createdAt",align:"center",hideInSearch:!0},{title:"更新时间",align:"center",dataIndex:"updatedAt",hideInSearch:!0}]},39623:function(e,t,n){n.a(e,(async function(e,a){try{n.r(t);var l=n(57627),r=e([l]);const o=(l=(r.then?(await r)():r)[0]).Z;t.default=o,a()}catch(e){a(e)}}))},57627:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Z:function(){return l.Z}});var l=n(68868),r=e([l]);l=(r.then?(await r)():r)[0],a()}catch(e){a(e)}}))},111:function(e,t,n){var a=n(36409),l=n(77226);t.Z=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,l.Z)(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),(0,a.Z)(e,t,{leading:r,maxWait:t,trailing:o})}}}]);